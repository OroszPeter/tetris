import{t as J,a as O,c as U}from"../chunks/BPnnkRTK.js";import{i as Le}from"../chunks/BFOrHGau.js";import{b as Me,h as k,a as Ce,q as t,a2 as se,c as Ne,r as he,s as pe,d as ae,g as B,T as qe,e as xe,f as Ee,p as Be,a3 as ne,Y as Te,K as _e,a4 as Ye,a5 as R,a6 as ge,O as Je,a7 as ze,a8 as Ke,X as Ue,a9 as Ve,i as Xe,aa as Ze,ab as Ge,R as We,z as Fe,A as ie,B as Qe,C as $,ac as x,ad as P,ae as je,D,F as Y,j as V}from"../chunks/-Txkefh7.js";import{e as me,s as ye}from"../chunks/CtkgfxdE.js";import{i as le}from"../chunks/C67TE64d.js";import{o as er}from"../chunks/CIxCYLaL.js";function X(n,e){return e}function rr(n,e,a,i){for(var f=[],c=e.length,v=0;v<c;v++)Ke(e[v].e,f,!0);var u=c>0&&f.length===0&&a!==null;if(u){var s=a.parentNode;Ue(s),s.append(a),i.clear(),S(n,e[0].prev,e[c-1].next)}Ve(f,()=>{for(var m=0;m<c;m++){var r=e[m];u||(i.delete(r.k),S(n,r.prev,r.next)),Xe(r.e,!u)}})}function Z(n,e,a,i,f,c=null){var v=n,u={flags:e,items:new Map,first:null};k&&Ce();var s=null,m=!1,r=se(()=>{var h=a();return Je(h)?h:h==null?[]:Te(h)});Me(()=>{var h=t(r),o=h.length;if(m&&o===0)return;m=o===0;let g=!1;if(k){var _=v.data===Ne;_!==(o===0)&&(v=he(),pe(v),ae(!1),g=!0)}if(k){for(var w=null,A,p=0;p<o;p++){if(B.nodeType===8&&B.data===qe){v=B,g=!0,ae(!1);break}var b=h[p],E=i(b,p);A=Ie(B,u,w,null,b,E,p,f,e,a),u.items.set(E,A),w=A}o>0&&pe(he())}k||tr(h,u,v,f,e,i,a),c!==null&&(o===0?s?xe(s):s=Ee(()=>c(v)):s!==null&&Be(s,()=>{s=null})),g&&ae(!0),t(r)}),k&&(v=B)}function tr(n,e,a,i,f,c,v){var u=n.length,s=e.items,m=e.first,r=m,h,o=null,g=[],_=[],w,A,p,b;for(b=0;b<u;b+=1){if(w=n[b],A=c(w,b),p=s.get(A),p===void 0){var E=r?r.e.nodes_start:a;o=Ie(E,e,o,o===null?e.first:o.next,w,A,b,i,f,v),s.set(A,o),g=[],_=[],r=o.next;continue}if(ar(p,w,b),(p.e.f&ne)!==0&&xe(p.e),p!==r){if(h!==void 0&&h.has(p)){if(g.length<_.length){var H=_[0],T;o=H.prev;var z=g[0],M=g[g.length-1];for(T=0;T<g.length;T+=1)be(g[T],H,a);for(T=0;T<_.length;T+=1)h.delete(_[T]);S(e,z.prev,M.next),S(e,o,z),S(e,M,H),r=H,o=M,b-=1,g=[],_=[]}else h.delete(p),be(p,r,a),S(e,p.prev,p.next),S(e,p,o===null?e.first:o.next),S(e,o,p),o=p;continue}for(g=[],_=[];r!==null&&r.k!==A;)(r.e.f&ne)===0&&(h??(h=new Set)).add(r),_.push(r),r=r.next;if(r===null)continue;p=r}g.push(p),o=p,r=p.next}if(r!==null||h!==void 0){for(var L=h===void 0?[]:Te(h);r!==null;)(r.e.f&ne)===0&&L.push(r),r=r.next;var G=L.length;if(G>0){var C=null;rr(e,L,C,s)}}_e.first=e.first&&e.first.e,_e.last=o&&o.e}function ar(n,e,a,i){Ye(n.v,e),n.i=a}function Ie(n,e,a,i,f,c,v,u,s,m){var r=(s&Ze)!==0,h=(s&Ge)===0,o=r?h?R(f):ge(f):f,g=(s&ze)===0?v:ge(v),_={i:g,v:o,k:c,a:null,e:null,prev:a,next:i};try{return _.e=Ee(()=>u(n,o,g,m),k),_.e.prev=a&&a.e,_.e.next=i&&i.e,a===null?e.first=_:(a.next=_,a.e.next=_.e),i!==null&&(i.prev=_,i.e.prev=_.e),_}finally{}}function be(n,e,a){for(var i=n.next?n.next.e.nodes_start:a,f=e?e.e.nodes_start:a,c=n.e.nodes_start;c!==i;){var v=We(c);f.before(c),c=v}}function S(n,e,a){e===null?n.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}const we=[...` 	
\r\f \v\uFEFF`];function nr(n,e,a){var i=""+n;if(a){for(var f in a)if(a[f])i=i?i+" "+f:f;else if(i.length)for(var c=f.length,v=0;(v=i.indexOf(f,v))>=0;){var u=v+c;(v===0||we.includes(i[v-1]))&&(u===i.length||we.includes(i[u]))?i=(v===0?"":i.substring(0,v))+i.substring(u+1):v=u}}return i===""?null:i}function ir(n,e){return n==null?null:String(n)}function lr(n,e,a,i,f,c){var v=n.__className;if(k||v!==a||v===void 0){var u=nr(a,i,c);(!k||u!==n.getAttribute("class"))&&(u==null?n.removeAttribute("class"):n.className=u),n.__className=a}else if(c&&f!==c)for(var s in c){var m=!!c[s];(f==null||m!==!!f[s])&&n.classList.toggle(s,m)}return c}function Ae(n,e,a,i){var f=n.__style;if(k||f!==e){var c=ir(e);(!k||c!==n.getAttribute("style"))&&(c==null?n.removeAttribute("style"):n.style.cssText=c),n.__style=e}return i}var sr=J('<div class="cell svelte-1haqnhp"></div>'),fr=J('<div class="cell piece svelte-1haqnhp"></div>'),or=J('<div class="game-over svelte-1haqnhp"><h2>Játék Vége</h2> <button class="svelte-1haqnhp">Új Játék</button></div>'),vr=J('<div class="game-container svelte-1haqnhp"><div class="score-container svelte-1haqnhp"><div class="score"> </div> <div class="high-score"> </div></div> <div><!> <!> <!></div></div>');function cr(n,e){Fe(e,!1);const a=10,i=20,f=30,c=a*f,v=i*f;let u=R(Array(i).fill().map(()=>Array(a).fill(0))),s=R(null),m=R(null),r=R({x:0,y:0}),h=R(!1),o=R(0),g=R(0),_;const w={I:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],O:[[1,1],[1,1]],T:[[0,1,0],[1,1,1],[0,0,0]],S:[[0,1,1],[1,1,0],[0,0,0]],Z:[[1,1,0],[0,1,1],[0,0,0]],J:[[1,0,0],[1,1,1],[0,0,0]],L:[[0,0,1],[1,1,1],[0,0,0]]},A={I:"#00f0f0",O:"#f0f000",T:"#a000f0",S:"#00f000",Z:"#f00000",J:"#0000f0",L:"#f0a000"};er(()=>(x(g,localStorage.getItem("tetrisHighScore")||0),p(),document.documentElement.style.setProperty("--board-width",`${c}px`),document.documentElement.style.setProperty("--board-height",`${v}px`),document.documentElement.style.setProperty("--block-size",`${f}px`),()=>{_&&clearInterval(_)}));function p(){x(u,Array(i).fill().map(()=>Array(a).fill(0))),x(o,0),x(h,!1),b(),_=setInterval(z,1e3)}function b(){const l=Object.keys(w),d=l[Math.floor(Math.random()*l.length)];x(m,d),x(s,w[d]),x(r,{x:Math.floor(a/2)-Math.floor(t(s)[0].length/2),y:0}),E()&&(x(h,!0),clearInterval(_),t(o)>t(g)&&(x(g,t(o)),localStorage.setItem("tetrisHighScore",t(g))))}function E(){for(let l=0;l<t(s).length;l++)for(let d=0;d<t(s)[l].length;d++)if(t(s)[l][d]){const y=t(r).x+d,I=t(r).y+l;if(y<0||y>=a||I>=i||I>=0&&t(u)[I][y])return!0}return!1}function H(){for(let l=0;l<t(s).length;l++)for(let d=0;d<t(s)[l].length;d++)if(t(s)[l][d]){const y=t(r).y+l;y>=0&&P(u,t(u)[y][t(r).x+d]=Object.keys(w).indexOf(t(m))+1)}}function T(){let l=0;for(let d=i-1;d>=0;d--)t(u)[d].every(y=>y)&&(t(u).splice(d,1),t(u).unshift(Array(a).fill(0)),l++,d++);x(o,t(o)+l*100)}function z(){t(h)||(P(r,t(r).y++),E()&&(P(r,t(r).y--),H(),T(),b()))}function M(){if(t(h))return;const l=t(s)[0].map((y,I)=>t(s).map(N=>N[I]).reverse()),d=t(s);x(s,l),E()&&x(s,d)}function L(l){t(h)||(P(r,t(r).x+=l),E()&&P(r,t(r).x-=l))}function G(l){switch(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(l.key)&&l.preventDefault(),l.key){case"ArrowLeft":L(-1);break;case"ArrowRight":L(1);break;case"ArrowDown":P(r,t(r).y++),E()&&P(r,t(r).y--);break;case"ArrowUp":M();break}}Le();var C=vr();me("keydown",je,G);var W=$(C),F=$(W),ke=$(F);D(F);var fe=Y(F,2),Oe=$(fe);D(fe),D(W);var Q=Y(W,2);let oe;var ve=$(Q);Z(ve,1,()=>t(u),X,(l,d,y)=>{var I=U(),N=V(I);Z(N,1,()=>t(d),X,(j,q,ee)=>{var K=sr();ie(re=>Ae(K,`background-color: ${re??""};
                            left: ${ee*f}px;
                            top: ${y*f}px;`),[()=>t(q)?A[Object.keys(w)[t(q)-1]]:"#000"],se),O(j,K)}),O(l,I)});var ce=Y(ve,2);{var Re=l=>{var d=U(),y=V(d);Z(y,1,()=>t(s),X,(I,N,j)=>{var q=U(),ee=V(q);Z(ee,1,()=>t(N),X,(K,re,$e)=>{var ue=U(),De=V(ue);{var He=te=>{var de=fr();ie(()=>Ae(de,`background-color: ${A[t(m)]??""};
                                    left: ${(t(r).x+$e)*f}px;
                                    top: ${(t(r).y+j)*f}px;`)),O(te,de)};le(De,te=>{t(re)&&te(He)})}O(K,ue)}),O(I,q)}),O(l,d)};le(ce,l=>{t(s)&&l(Re)})}var Se=Y(ce,2);{var Pe=l=>{var d=or(),y=Y($(d),2);D(d),me("click",y,p),O(l,d)};le(Se,l=>{t(h)&&l(Pe)})}D(Q),D(C),ie(l=>{ye(ke,`Pontszám: ${t(o)??""}`),ye(Oe,`Rekord: ${t(g)??""}`),oe=lr(Q,1,"game-board svelte-1haqnhp",null,oe,l)},[()=>({"game-over":t(h)})],se),O(n,C),Qe()}var ur=J('<main class="svelte-1u1w95"><!></main>');function yr(n){var e=ur(),a=$(e);cr(a,{}),D(e),O(n,e)}export{yr as component};
